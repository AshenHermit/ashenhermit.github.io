{"version":3,"sources":["config.js","logo.svg","api.js","utils.js","components/year_circle.js","components/editable_components.js","components/main_content.js","components/music_menu.js","client.js","init.js","App.js","index.js"],"names":["months","TrackStruct","title","artist","embedding_code","data","JSON","parse","stringify","this","btoa","Object","assign","track","atob","PostStruct","description","tracks","size","position","map","to_raw_data","post","raw","from_raw_data","Api","posts","DEBUG","console","log","process","callback","fetch","then","res","json","raw_data","utils","value","min","max","Math","x","y","floor","text","regexp","replace_func","match","replace","slice","replaceRegexp","args","RegExp","posts_array","nearest_post","dist","abs","i","length","temp_dist","Array","from","sort","YearCircle","props","state","month","year","_post_placeholder","canvas_container_ref","React","createRef","canvas_ref","canvas","ctx","active_post","view_position","view_position_target","resizeCanvas","bind","draw","mousedown","mousemove","mouseup","is_dragging","drag_start_mouse_pos","drag_start_view_pos","last_month","client","year_circle_component","mod","setState","getPostNearestToPosition","setActivePost","setupCanvas","e","pageX","checkNearestPost","addEventListener","window","changedTouches","current","getContext","ResizeObserver","observe","setupCanvasEventListeners","client_rect","getClientRects","style","height","width","circle_radius","lineWidth","month_angle","PI","angle_offset","strokeStyle","beginPath","arc","stroke","angle","postPositionToAngle","cos","sin","globalAlpha","moveTo","lineTo","clamp","fillStyle","save","font_height","font","translate","rotate","textAlign","fillText","restore","fill","requestAnimationFrame","clearRect","drawViewPosition","drawCircle","drawPost","updateViewDate","ref","className","Component","EditorInput","onChange","input_ref","target","edit_mode_fields","field_key","innerHTML","defaultValue","onInput","contentEditable","EditableComponent","is_in_edit_mode","edit_render","default_render","Title","Description","replaceAll","dangerouslySetInnerHTML","__html","renderMarkup","MainContent","main_content_component","Track","MusicMenu","music_menu_component","frame","is_shown","top","EditModeFields","Client","api","build_placeholder","push","addPlaceholderPost","setPosts","isMobile","hideMusicMenu","loadPosts","getLastPost","show","hide","showMusicMenu","forceUpdate","IconButton","onClick","src","icon_src","TopBar","toggleEditMode","toggleMusicMenu","Footer","App","initialize","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7b64a83b.chunk.js","sourcesContent":["export var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];\r\nexport var debug_posts = \"[{\\\"position\\\":-0.5333333333333333,\\\"title\\\":\\\"Ожидая\\\",\\\"description\\\":\\\"Начал писать движок и редактор soulless moon (с++).\\\\nНаписал редактор и \\\\nинтерпретатор branfuck'а на ардуино (с++).\\\\nНачал писать игровой 2d движок (с++) и редактор с\\\\nкостями у меш-спрайтов.\\\\nПисал 3д игровой движок и редактор с \\\\n\\\\\\\"тайловой\\\\\\\" системой карт, как в delver.\\\\nПытался писать блэк метал вдохновляясь\\\\nsombres forets, не вышло.\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09MTQ0MTc3NDQxNC9zaXplPWxhcmdlL2JnY29sPTMzMzMzMy9saW5rY29sPWUzMmMxNC90cmFja2xpc3Q9ZmFsc2UvYXJ0d29yaz1zbWFsbC90cmFjaz0yODEyNjM1NDczL3RyYW5zcGFyZW50PXRydWUvIiBzZWFtbGVzcz48YSBocmVmPSJodHRwOi8vc2VsZm11dGlsYXRpb25zZXJ2aWNlcy5jb20vYWxidW0vZmFpbGluZy10by1jb25mcm9udC1zdWljaWRhbC10aG91Z2h0cyI\\\"}]},{\\\"position\\\":7.566666666666672,\\\"title\\\":\\\"Кода\\\",\\\"description\\\":\\\"Прощаюсь с деревней\\\\n\\\\n+ Приложение Days для краткого описания дней\\\\n+ Этот сайт\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSB3aWR0aD0iNTYwIiBoZWlnaHQ9IjMxNSIgc3JjPSJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9ST19EdU92V0FIYyIgZnJhbWVib3JkZXI9IjAiIGFsbG93PSJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZSIgYWxsb3dmdWxsc2NyZWVuPSIiPjwvaWZyYW1lPg==\\\"}]},{\\\"position\\\":7.16666666666667,\\\"title\\\":\\\"Пиксельный Психодел\\\",\\\"description\\\":\\\"Пишу осмысленный сюжет комикса и рисую первые страницы.\\\\nМеняю рисовку на более мягкую, минималистичную, \\\\nно очень непредсказуемую.\\\\n\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09MTEwNTMwMjQwL3NpemU9bGFyZ2UvYmdjb2w9MzMzMzMzL2xpbmtjb2w9ZmZmZmZmL3RyYWNrbGlzdD1mYWxzZS9hcnR3b3JrPXNtYWxsL3RyYWNrPTEwMTAyNjA5NzUvdHJhbnNwYXJlbnQ9dHJ1ZS8iIHNlYW1sZXNzPjxhIGhyZWY9Imh0dHA6Ly9kb3duZmFsbG9mZ2FpYS5iYW5kY2FtcC5jb20vYWxidW0vYWVvbi11bnZlaWxzLXRoZS10aHJvbmVzLW9mLWRlY2F5LTIiPkFlb24gVW52ZWlscyB0aGUgVGhyb25lcyBvZiBEZWNheSBieSBEb3duZmFsbCBvZiBHYWlhPC9hPjwvaWZyYW1lPg==\\\"}]},{\\\"position\\\":6.866666666666666,\\\"title\\\":\\\"Плавление Древесины\\\",\\\"description\\\":\\\"Выжигаю кайфовые дымящиеся рисунки на дереве.\\\\n\\\\nПишу небольшой пиксельный top down шутер про поезда на c++,\\\\nиспользуя код ресурсов и ИИ из NoumenalAnxiety.\\\\nВ качестве редактора карт я снова выбрал блендер.\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09MjgxNzU1NTYwMC9zaXplPWxhcmdlL2JnY29sPTMzMzMzMy9saW5rY29sPWZlN2VhZi90cmFja2xpc3Q9ZmFsc2UvYXJ0d29yaz1zbWFsbC90cmFjaz0zNDM4OTAzMTE3L3RyYW5zcGFyZW50PXRydWUvIiBzZWFtbGVzcz48YSBocmVmPSJodHRwczovL2VsaHVlcnZvLmJhbmRjYW1wLmNvbS9hbGJ1bS93b3JsZHMtZW5kIj5Xb3JsZCYjMzk7cyBFbmQgYnkgRWwgSHVlcnZvPC9hPjwvaWZyYW1lPg==\\\"}]},{\\\"position\\\":6.533333333333335,\\\"title\\\":\\\"Осознанные сны\\\",\\\"size\\\":0.5,\\\"description\\\":\\\"\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSB3aWR0aD0iNTYwIiBoZWlnaHQ9IjMxNSIgc3JjPSJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9kcjhXSkZ3LWVjbyIgZnJhbWVib3JkZXI9IjAiIGFsbG93PSJhY2NlbGVyb21ldGVyOyBhdXRvcGxheTsgZW5jcnlwdGVkLW1lZGlhOyBneXJvc2NvcGU7IHBpY3R1cmUtaW4tcGljdHVyZSIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPg==\\\"}]},{\\\"position\\\":6.299999999999994,\\\"title\\\":\\\"Вибрации\\\",\\\"description\\\":\\\"Писал мелодичную музыку используя звуки записанные на рекордер.\\\\nПисал метал.\\\\nНесколько треков объединил в альбом (\\\\\\\"June 2020\\\\\\\" у меня в аудио).\\\\n\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09Mjg3MzM1Mjc5L3NpemU9bGFyZ2UvYmdjb2w9MzMzMzMzL2xpbmtjb2w9ZmZmZmZmL3RyYWNrbGlzdD1mYWxzZS9hcnR3b3JrPXNtYWxsL3RyYWNrPTg4OTEzNjUzMC90cmFuc3BhcmVudD10cnVlLyIgc2VhbWxlc3M+PGEgaHJlZj0iaHR0cDovL2R2YTIuYmFuZGNhbXAuY29tL2FsYnVtL2JvdGFuaWN1bGEiPkJPVEFOSUNVTEEgYnkgRHZhPC9hPjwvaWZyYW1lPg==\\\"}]},{\\\"position\\\":5.96666666666667,\\\"title\\\":\\\"Гаррис\\\",\\\"description\\\":\\\"Писал аддоны для гарриса и лепил карты.\\\\n\\\\n+ Аддон на инструмент коробки фиксирующей все объекты в ее поле.\\\\n+ Аддон на шашлыки (мангал, шампуры, угли, мясо, квас, разделочная доска).\\\\n+ Аддон на воду и чайник с дошиком и пакетиком специй.\\\\n+ Аддон на регдолл Вани.\\\\n+ Аддон на регдолл Миши.\\\\n+ Карта квартиры Миши.\\\\n+ Аддон на крутилку.\\\\n\\\\n[все мои аддоны](https://drive.google.com/drive/folders/1n-WwZ_4WKzufe5iVBaUlMbHcIL1kL9Ev)\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09MTMxNzQ2NzI4Ni9zaXplPWxhcmdlL2JnY29sPTMzMzMzMy9saW5rY29sPTRlYzVlYy90cmFja2xpc3Q9ZmFsc2UvYXJ0d29yaz1zbWFsbC90cmFjaz0xNzA0NTk4MzI5L3RyYW5zcGFyZW50PXRydWUvIiBzZWFtbGVzcz0iIj48YSBocmVmPSJodHRwOi8vbGViYW5vbmhhbm92ZXIuYmFuZGNhbXAuY29tL2FsYnVtL3RoZS13b3JsZC1pcy1nZXR0aW5nLWNvbGRlciI+VGhlIFdvcmxkIElzIEdldHRpbmcgQ29sZGVyIGJ5IExlYmFub24gSGFub3ZlcjwvYT48L2lmcmFtZT4=\\\"}]},{\\\"position\\\":5.5333333333333385,\\\"title\\\":\\\"NoumenalAnxiety #2\\\",\\\"description\\\":\\\"Весь месяц работал над игрой.\\\\n\\\\n+ Сюжет.\\\\n+ Аддон для блендера - экспорт сцены в мой формат карт.\\\\n+ Генерация карт.\\\\n+ ИИ и навигация по карте.\\\\n+ Загрузка данных из своего формата об оружии, врагах.\\\\n+ Первая нетестовая комната.\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09Nzk1NzgxMDY5L3NpemU9bGFyZ2UvYmdjb2w9MzMzMzMzL2xpbmtjb2w9ZmZmZmZmL3RyYWNrbGlzdD1mYWxzZS9hcnR3b3JrPXNtYWxsL3RyYWNrPTE0NjEwMTM3MDAvdHJhbnNwYXJlbnQ9dHJ1ZS8iIHNlYW1sZXNzPjxhIGhyZWY9Imh0dHA6Ly9pbm5lcnN1ZmZlcmluZy5iYW5kY2FtcC5jb20vYWxidW0vdW5pbnNwaXJlZC1lcCI+dW5pbnNwaXJlZCBFUCBieSBJbm5lciBTdWZmZXJpbmc8L2E+PC9pZnJhbWU+\\\"}]},{\\\"position\\\":4.73333333333334,\\\"title\\\":\\\"NoumenalAnxiety\\\",\\\"description\\\":\\\"Начинаю думать о создании игры и пишу основу движка.\\\\n\\\\n+ Загрузка ресурсов.\\\\n+ Рендеринг текстур и анимаций.\\\\n+ Рендеринг карты.\\\\n+ Физика.\\\\n\\\\nВ конце мая уехал в деревню.\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09NDE2NDM2OTY0Mi9zaXplPWxhcmdlL2JnY29sPTMzMzMzMy9saW5rY29sPWZmZmZmZi90cmFja2xpc3Q9ZmFsc2UvYXJ0d29yaz1zbWFsbC90cmFjaz0zNzU5Njg1NDg3L3RyYW5zcGFyZW50PXRydWUvIiBzZWFtbGVzcz48YSBocmVmPSJodHRwOi8vYW5hdXR1bW5mb3JjcmlwcGxlZGNoaWxkcmVuLmJhbmRjYW1wLmNvbS9hbGJ1bS9hbGwtZmVsbC1zaWxlbnQtZXZlcnl0aGluZy13ZW50LXF1aWV0LTIiPkFsbCBmZWxsIHNpbGVudCwgZXZlcnl0aGluZyB3ZW50IHF1aWV0IGJ5IEFuIEF1dHVtbiBGb3IgQ3JpcHBsZWQgQ2hpbGRyZW48L2E+PC9pZnJhbWU+\\\"}]},{\\\"position\\\":4.066666666666666,\\\"title\\\":\\\"Stories\\\",\\\"description\\\":\\\"Настроение писать рассказы.\\\\nНекоторые опубликовал в вк.\\\",\\\"tracks\\\":[{\\\"embedding_code\\\":\\\"PGlmcmFtZSBzdHlsZT0iYm9yZGVyOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMjBweDsiIHNyYz0iaHR0cHM6Ly9iYW5kY2FtcC5jb20vRW1iZWRkZWRQbGF5ZXIvYWxidW09MTMwMjk0OTE5Mi9zaXplPWxhcmdlL2JnY29sPTMzMzMzMy9saW5rY29sPWZmZmZmZi90cmFja2xpc3Q9ZmFsc2UvYXJ0d29yaz1zbWFsbC90cmFjaz0xODg5OTcwMTQwL3RyYW5zcGFyZW50PXRydWUvIiBzZWFtbGVzcz48YSBocmVmPSJodHRwOi8vYW5hdXR1bW5mb3JjcmlwcGxlZGNoaWxkcmVuLmJhbmRjYW1wLmNvbS9hbGJ1bS93aXRoZXJlZC1kcmVhbXMtc2luZ2xlcy0yMDEzLTIwMTciPldpdGhlcmVkIERyZWFtcyAoc2luZ2xlcyAyMDEzLTIwMTcpIGJ5IEFuIEF1dHVtbiBGb3IgQ3JpcHBsZWQgQ2hpbGRyZW48L2E+PC9pZnJhbWU+\\\"}]}]\"\r\nexport var start_year = 2021;\r\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import {debug_posts} from './config'\r\n\r\n/**\r\n * Track Struct\r\n */\r\nexport class TrackStruct{\r\n    title = \"track title\"\r\n    artist = \"artist\"\r\n    embedding_code = \"\"\r\n\r\n    constructor(){\r\n    }\r\n\r\n    static from_raw_data(data){\r\n        data = Object.assign({}, data)\r\n        var track = new TrackStruct()\r\n        Object.assign(track, data)\r\n        track.embedding_code = atob(track.embedding_code)\r\n        return track\r\n    }\r\n    to_raw_data(){\r\n        var data = JSON.parse(JSON.stringify(this))\r\n        data.embedding_code = btoa(data.embedding_code)\r\n        return data\r\n    }\r\n}\r\n\r\n/**\r\n * Post (Memory) Struct\r\n */\r\nexport class PostStruct{\r\n    title = \"Title\"\r\n    description = \"Description\"\r\n    /**@type {Array<TrackStruct>}*/\r\n    tracks = []\r\n    size = 1\r\n    position = 0\r\n\r\n    constructor(){\r\n    }\r\n\r\n    static from_raw_data(data){\r\n        data = Object.assign({}, data)\r\n        var post = new PostStruct()\r\n        Object.assign(post, data)\r\n        post.tracks = post.tracks.map(raw=>TrackStruct.from_raw_data(raw))\r\n        return post\r\n    }\r\n    to_raw_data(data){\r\n        var data = JSON.parse(JSON.stringify(this))\r\n        data.tracks = this.tracks.map(track=>track.to_raw_data())\r\n        return data\r\n    }\r\n\r\n    /**\r\n     * build post with dummy info, used when no data loaded\r\n     */\r\n    static build_placeholder(){\r\n        var post = new PostStruct()\r\n        return post\r\n    }\r\n\r\n}\r\n\r\nexport class Api{\r\n    posts = []\r\n    DEBUG = false\r\n\r\n    constructor(){\r\n        console.log(process.env.NODE_ENV)\r\n    }\r\n    \r\n    loadPosts(callback){\r\n        if(this.DEBUG){\r\n            this.posts = JSON.parse(debug_posts)\r\n            this.posts = this.posts.map(data=>PostStruct.from_raw_data(data))\r\n            callback(this.posts)\r\n        }else{\r\n            fetch(\"https://dl.dropbox.com/s/so8ud7sp9lae0vj/memories.json\")\r\n            .then(res=>res.json())\r\n            .then(raw_data=>{\r\n                this.posts = raw_data.map(data=>PostStruct.from_raw_data(data))\r\n                callback(this.posts)\r\n            })\r\n        }\r\n        \r\n    }\r\n}","import React from 'react'\r\n\r\nvar utils = {}\r\n\r\nutils.clamp = function(value, min, max){\r\n    return Math.max(min, Math.min(value, max))\r\n}\r\nutils.mod = function(x, y){\r\n    return x - y * Math.floor(x/y)\r\n}\r\nutils.replaceRegexp = function(text, regexp, replace_func){\r\n    var match = text.match(regexp)\r\n    while(match){\r\n        text = text.replace(match[0], replace_func(match.slice(1)))\r\n        match = text.match(regexp)\r\n    }\r\n    return text\r\n}\r\nutils.renderMarkup = function(text){\r\n    // links\r\n\ttext = this.replaceRegexp(text, \r\n        /\\[(.*)\\]\\((.*)\\)/m, \r\n        args=>`<a target=\"_blank\" href=\"${args[1]}\">${args[0]}</a>`)\r\n        \r\n    text = text.replace(new RegExp(\"\\n\", \"g\"), \"<br/>\")\r\n    return text\r\n}\r\n\r\nutils.getPostNearestToPosition = function(posts_array, position){\r\n    var nearest_post = posts_array[0]\r\n    var dist = Math.abs(nearest_post.position - position)\r\n    for (let i = 1; i < posts_array.length; i++) {\r\n        const post = posts_array[i];\r\n\r\n        var temp_dist = Math.abs(post.position - position)\r\n        if(temp_dist < dist){\r\n            nearest_post = post\r\n            dist = temp_dist\r\n        }\r\n    }\r\n    return nearest_post\r\n}\r\n\r\nutils.getLastPost = function(posts_array){\r\n    var last_post = Array.from(posts_array).sort((x, y)=>{\r\n        if (x.position > y.position) return -1\r\n        if (x.position < y.position) return 1\r\n        return 0\r\n    })[0]\r\n    \r\n    return last_post\r\n}\r\n\r\nexport default utils","import React from 'react'\r\nimport { PostStruct } from '../api'\r\nimport {client, _post_placeholder} from '../init'\r\nimport {default as utils} from '../utils'\r\nimport {months, start_year} from '../config'\r\n\r\nexport class YearCircle extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {month: 0, year: 2021}\r\n\r\n        this.posts = [_post_placeholder]\r\n        \r\n        this.canvas_container_ref = React.createRef()\r\n        this.canvas_ref = React.createRef()\r\n        /**@type {HTMLCanvasElement} */\r\n        this.canvas = null\r\n        /**@type {CanvasRenderingContext2D} */\r\n        this.ctx = null\r\n\r\n        this.active_post = _post_placeholder\r\n\r\n        this.view_position = 0\r\n        this.view_position_target = 0\r\n \r\n        this.resizeCanvas = this.resizeCanvas.bind(this)\r\n        this.draw = this.draw.bind(this)\r\n\r\n        this.mousedown = this.mousedown.bind(this)\r\n        this.mousemove = this.mousemove.bind(this)\r\n        this.mouseup = this.mouseup.bind(this)\r\n\r\n        this.is_dragging = false\r\n        this.drag_start_mouse_pos = 0\r\n        this.drag_start_view_pos = 0\r\n\r\n        this.last_month = 0\r\n\r\n        client.year_circle_component = this\r\n    }\r\n    setPosts(posts_array){\r\n        this.posts = posts_array\r\n    }\r\n    updateViewDate(){\r\n        var month = utils.mod(Math.floor(this.view_position), 12)\r\n        var year = start_year + Math.floor(this.view_position/12)\r\n        this.setState({month: month, year: year})\r\n    }\r\n\r\n    checkNearestPost(){\r\n        var nearest_post = utils.getPostNearestToPosition(this.posts, this.view_position_target)\r\n\r\n        if(nearest_post != this.active_post){\r\n            this.setActivePost(nearest_post)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {PostStruct} post \r\n     */\r\n    setActivePost(post){\r\n        this.view_position_target = post.position\r\n        this.active_post = post\r\n        this.is_dragging = false\r\n        client.setActivePost(this.active_post)\r\n    }\r\n    \r\n    componentDidMount(){\r\n        client.year_circle_component = this\r\n        this.setupCanvas()\r\n        this.draw()\r\n    }\r\n    mousedown(e){\r\n        this.is_dragging = true\r\n        this.drag_start_mouse_pos = e.pageX\r\n        this.drag_start_view_pos = this.view_position_target\r\n    }\r\n    mousemove(e){\r\n        if(this.is_dragging){\r\n            this.view_position_target = this.drag_start_view_pos + (e.pageX - this.drag_start_mouse_pos)/100\r\n            this.checkNearestPost()\r\n        }\r\n    }\r\n    mouseup(e){\r\n        this.is_dragging = false\r\n    }\r\n\r\n    setupCanvasEventListeners(){\r\n        this.canvas.addEventListener('mousedown', this.mousedown)\r\n        window.addEventListener('mousemove', this.mousemove)\r\n        window.addEventListener('mouseup', this.mouseup)\r\n\r\n        this.canvas.addEventListener('touchstart', e=>this.mousedown(e.changedTouches[0]))\r\n        window.addEventListener('touchmove', e=>this.mousemove(e.changedTouches[0]))\r\n        window.addEventListener('touchend', e=>this.mouseup(e.changedTouches[0]))\r\n        window.addEventListener('touchcancel', e=>this.mouseup(e.changedTouches[0]))\r\n    }\r\n    setupCanvas(){\r\n        this.canvas = this.canvas_ref.current\r\n        this.ctx = this.canvas.getContext('2d')\r\n        \r\n        // resize canvas when container resized\r\n        new ResizeObserver(this.resizeCanvas)\r\n            .observe(this.canvas_container_ref.current)\r\n        this.resizeCanvas()\r\n        this.setupCanvasEventListeners()\r\n    }\r\n    resizeCanvas(){\r\n        var client_rect = this.canvas_container_ref.current.getClientRects()[0]\r\n        this.canvas_container_ref.current.style.height = client_rect.width + 'px'\r\n        client_rect.height = client_rect.width\r\n        this.canvas.width = client_rect.width\r\n        this.canvas.height = client_rect.height\r\n    }\r\n\r\n    static postPositionToAngle(position){\r\n        var angle_offset = 2 * Math.PI / 12 * 2.5\r\n        var angle = position / 12 * 2 * Math.PI\r\n        angle += angle_offset\r\n        return angle\r\n    }\r\n\r\n    drawCircle(circle_radius){\r\n        this.ctx.lineWidth = 8\r\n        \r\n        for (let i = 0; i < 12; i++) {\r\n            var month_angle = 2 * Math.PI / 12\r\n            var angle_offset = 2 * Math.PI / 12 / 2\r\n\r\n            // this.ctx.strokeStyle = i%2 == 0 ? \"#353535\" : \"#3f3f3f\"\r\n            this.ctx.strokeStyle = \"#353535\"\r\n            this.ctx.beginPath();\r\n            this.ctx.arc(this.canvas.width/2, this.canvas.height/2, circle_radius, \r\n                angle_offset+i*month_angle, \r\n                angle_offset+i*month_angle + month_angle*0.95);\r\n            this.ctx.stroke();\r\n        }\r\n    }\r\n    drawViewPosition(circle_radius){\r\n        var angle = YearCircle.postPositionToAngle(this.view_position)\r\n        \r\n        var x = Math.cos(angle)\r\n        var y = Math.sin(angle)\r\n        \r\n        this.ctx.lineWidth = 5\r\n        this.ctx.strokeStyle = \"#fff\"\r\n        this.ctx.globalAlpha = 0.1\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(\r\n            this.canvas.width/2 + x * (circle_radius * 0.5), \r\n            this.canvas.height/2 + y * (circle_radius * 0.5)\r\n        );\r\n        this.ctx.lineTo(\r\n            this.canvas.width/2 + x * (circle_radius * 0.8), \r\n            this.canvas.height/2 + y * (circle_radius * 0.8)\r\n        );\r\n        this.ctx.stroke();\r\n        this.ctx.globalAlpha = 1\r\n    }\r\n    /**\r\n     * @param {PostStruct} post \r\n     */\r\n    drawPost(post, circle_radius){\r\n        var angle = YearCircle.postPositionToAngle(post.position)\r\n        \r\n        var x = Math.cos(angle) * (circle_radius)\r\n        var y = Math.sin(angle) * (circle_radius)\r\n        \r\n        this.ctx.globalAlpha = utils.clamp(1-Math.abs(this.view_position - post.position) / 3, 0, 1) * 0.5\r\n        if(this.ctx.globalAlpha > 0){\r\n            this.ctx.lineWidth = 5\r\n            this.ctx.strokeStyle = post == this.active_post ? \"#ffc677\" : \"#353535\"\r\n            this.ctx.fillStyle = \"#fff\"\r\n            if(post == this.active_post){\r\n                this.ctx.fillStyle = \"#ffc677\"\r\n                this.ctx.globalAlpha = 1\r\n            }\r\n\r\n            this.ctx.save();\r\n            var font_height = Math.floor(circle_radius/15)\r\n            this.ctx.font = font_height+\"px monospace\";\r\n            this.ctx.translate(this.canvas.width/2, this.canvas.height/2);\r\n            if(x > 0){\r\n                this.ctx.rotate(angle)\r\n                this.ctx.translate(circle_radius*1.12, 4);\r\n                this.ctx.textAlign = \"left\"\r\n            }else{\r\n                this.ctx.rotate(angle + Math.PI)\r\n                this.ctx.translate(-circle_radius*1.12, 4);\r\n                this.ctx.textAlign = \"right\"\r\n            }\r\n            this.ctx.fillText(post.title, 0, 0)\r\n            this.ctx.restore();\r\n            \r\n            this.ctx.beginPath()\r\n            this.ctx.arc(this.canvas.width/2 + x, this.canvas.height/2 + y, post.size * circle_radius / 10, 0, 2 * Math.PI)\r\n            this.ctx.fill()\r\n        }\r\n        this.ctx.globalAlpha = 1\r\n    }\r\n    draw(){\r\n        requestAnimationFrame(this.draw)\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n        this.view_position += (this.view_position_target-this.view_position)/3\r\n\r\n        const circle_radius = this.canvas.width*0.3\r\n\r\n        this.drawViewPosition(circle_radius)\r\n\r\n        this.drawCircle(circle_radius)\r\n\r\n        for (let i = 0; i < this.posts.length; i++) {\r\n            const post = this.posts[i];\r\n            if(post != this.active_post){\r\n                this.drawPost(post, circle_radius)\r\n            }\r\n        }\r\n        this.drawPost(this.active_post, circle_radius)\r\n\r\n        if (Math.floor(this.view_position) != this.last_month){\r\n            this.updateViewDate()\r\n        }\r\n        this.last_month = Math.floor(this.view_position)\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div ref={this.canvas_container_ref} className=\"year-circle\">\r\n                <div className=\"year-circle-view-date\">\r\n                    <div className=\"year-circle-view-date-year\">{this.state.year}</div>\r\n                    <div className=\"year-circle-view-date-month\">{months[this.state.month]}</div>\r\n                </div>\r\n                <canvas ref={this.canvas_ref} className=\"year-circle-canvas\"></canvas>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\n\r\nexport class EditorInput extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.onChange = this.onChange.bind(this)\r\n        this.input_ref = React.createRef()\r\n    }\r\n    onChange(e){\r\n        console.log(e.target)\r\n        this.props.edit_mode_fields[this.props.field_key] = this.input_ref.current.value\r\n    }\r\n    componentDidMount(){\r\n        this.input_ref.current.innerHTML = this.props.defaultValue\r\n    }\r\n    componentDidUpdate(){\r\n        this.input_ref.current.innerHTML = this.props.defaultValue\r\n    }\r\n    render(){\r\n        return (\r\n            <div ref={this.input_ref} className={\"input \"+this.props.className} onInput={this.onChange} contentEditable='true'></div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class EditableComponent extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n    }\r\n    edit_render(){\r\n\r\n    }\r\n    default_render(){\r\n        \r\n    }\r\n    render(){\r\n        if(this.props.is_in_edit_mode){\r\n            return this.edit_render()\r\n        }\r\n        return this.default_render()\r\n    }\r\n}","import React from 'react'\r\nimport {YearCircle} from './year_circle'\r\nimport {client, _post_placeholder} from '../init'\r\nimport {PostStruct} from '../api'\r\nimport {default as utils} from '../utils'\r\nimport {EditableComponent, EditorInput} from './editable_components'\r\n\r\n\r\nclass Title extends EditableComponent{\r\n    constructor(props){\r\n        super(props)\r\n    }\r\n    edit_render(){\r\n        return (\r\n            <EditorInput \r\n                field_key=\"post_title\" \r\n                edit_mode_fields={this.props.edit_mode_fields} \r\n                className=\"title\" \r\n                defaultValue={this.props.text}/>\r\n        )\r\n    }\r\n    default_render(){\r\n        return (\r\n            <div className=\"title\">\r\n                {this.props.text}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass Description extends EditableComponent{\r\n    constructor(props){\r\n        super(props)\r\n    }\r\n    edit_render(){\r\n        return (\r\n            <EditorInput \r\n                field_key=\"post_title\" \r\n                edit_mode_fields={this.props.edit_mode_fields} \r\n                className=\"description\" \r\n                defaultValue={this.props.text.replaceAll(\"\\n\", \"<br/>\")}/>\r\n        )\r\n    }\r\n    default_render(){\r\n        return (\r\n            <div className=\"description\" \r\n                dangerouslySetInnerHTML={{__html: utils.renderMarkup(this.props.text)}}>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class MainContent extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {active_post: _post_placeholder}\r\n    }\r\n    componentDidMount(){\r\n        client.main_content_component = this\r\n    }\r\n    setActivePost(post){\r\n        this.setState({active_post: post})\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"main-content\">\r\n                <YearCircle/>\r\n                <div className=\"post-info\">\r\n                    <Title text={this.state.active_post.title} \r\n                        is_in_edit_mode={client.is_in_edit_mode} edit_mode_fields={client.edit_mode_fields}/>\r\n\r\n                    <Description text={this.state.active_post.description} \r\n                        is_in_edit_mode={client.is_in_edit_mode} edit_mode_fields={client.edit_mode_fields}/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport {isMobile} from 'react-device-detect'\r\nimport {client, _post_placeholder} from '../init'\r\n\r\nclass Track extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"track\">\r\n                <div className=\"track-embedding\" \r\n                    dangerouslySetInnerHTML={{__html: this.props.track.embedding_code}}>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class MusicMenu extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {active_post: _post_placeholder}\r\n        client.music_menu_component = this\r\n        this.frame = React.createRef()\r\n        this.is_shown = true\r\n    }\r\n    setActivePost(post){\r\n        this.setState({active_post: post})\r\n    }\r\n    show(){\r\n        this.frame.current.style.top = '0px'\r\n        this.is_shown = true\r\n    }\r\n    hide(){\r\n        this.frame.current.style.top = '-100vh'\r\n        this.is_shown = false\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"music-menu\" ref={this.frame}>\r\n                <div className=\"tracks-list\">\r\n                    {this.state.active_post.tracks.map((track, i)=>{\r\n                        return (<Track key={\"track_\"+i} track={track}/>)\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import { Api, PostStruct, TrackStruct } from \"./api\";\r\nimport { default as utils } from \"./utils\";\r\nimport { debug_memories } from \"./config\";\r\nimport {MainContent} from './components/main_content'\r\nimport {YearCircle} from './components/year_circle'\r\nimport {MusicMenu} from './components/music_menu'\r\nimport {isMobile} from 'react-device-detect'\r\n\r\nclass EditModeFields{\r\n\r\n}\r\n\r\nexport class Client{\r\n    /** @param {Api} api */\r\n    constructor(api){\r\n        this.api = api\r\n\r\n        /**@type {MusicMenu} */\r\n        this.music_menu_component = null\r\n        /**@type {MainContent} */\r\n        this.main_content_component = null\r\n        /**@type {YearCircle} */\r\n        this.year_circle_component = null\r\n        /**@type {PostStruct} */\r\n        this.active_post = {}\r\n        \r\n        /**@type {Array<PostStruct>} */\r\n        this.posts = []\r\n\r\n        this.is_in_edit_mode = false\r\n        /**@type {EditModeFields} */\r\n        this.edit_mode_fields = new EditModeFields()\r\n    }\r\n\r\n    addPlaceholderPost(){\r\n        var post = PostStruct.build_placeholder()\r\n        post.position = 0\r\n        post.title = \"memories are loading...\"\r\n        post.description = \"please wait\"\r\n        post.size = 1\r\n        this.posts.push(post)\r\n    }\r\n\r\n    initialize(){\r\n        this.addPlaceholderPost()\r\n        this.year_circle_component.setPosts(this.posts)\r\n        this.year_circle_component.setActivePost(this.posts[0])\r\n        if(isMobile) this.hideMusicMenu()\r\n\r\n        this.api.loadPosts(posts=>{\r\n            this.posts = posts\r\n            this.year_circle_component.setPosts(this.posts)\r\n            this.year_circle_component.setActivePost(utils.getLastPost(this.posts))\r\n        })\r\n    }\r\n\r\n    /** @param {PostStruct} post*/\r\n    setActivePost(post){\r\n        this.active_post = post\r\n        this.main_content_component.setActivePost(this.active_post)\r\n        this.music_menu_component.setActivePost(this.active_post)\r\n    }\r\n\r\n    showMusicMenu(){\r\n        this.music_menu_component.show()\r\n    }\r\n    hideMusicMenu(){\r\n        this.music_menu_component.hide()\r\n    }\r\n    toggleMusicMenu(){\r\n        if(this.music_menu_component.is_shown){\r\n            this.hideMusicMenu()\r\n        }else{\r\n            this.showMusicMenu()\r\n        }\r\n    }\r\n\r\n    enterEditMode(){\r\n        this.is_in_edit_mode = true\r\n        this.music_menu_component.forceUpdate()\r\n        this.main_content_component.forceUpdate()\r\n    }\r\n    exitEditMode(){\r\n        this.is_in_edit_mode = false\r\n        this.music_menu_component.forceUpdate()\r\n        this.main_content_component.forceUpdate()\r\n    }\r\n    toggleEditMode(){\r\n        this.is_in_edit_mode = !this.is_in_edit_mode\r\n        this.music_menu_component.forceUpdate()\r\n        this.main_content_component.forceUpdate()\r\n    }\r\n}","import {Client} from './client'\r\nimport {Api, PostStruct} from './api'\r\nimport {default as utils} from './utils'\r\n\r\nexport var api = new Api()\r\nexport var client = new Client(api)\r\n\r\nexport var _post_placeholder = PostStruct.build_placeholder()\r\n\r\nwindow.api = api\r\nwindow.client = client\r\nwindow.utils = utils","import logo from './logo.svg';\nimport './App.css';\nimport React from 'react'\nimport {api, client} from './init'\nimport {MainContent} from './components/main_content'\nimport {MusicMenu} from './components/music_menu'\n\nclass IconButton extends React.Component{\n  constructor(props){\n      super(props)\n  }\n  render(){\n    return (\n      <button className=\"icon-button\" onClick={this.props.onClick}>\n        <img src={this.props.icon_src}></img>\n      </button>\n    )\n  }\n}\n\nclass TopBar extends React.Component{\n  constructor(props){\n      super(props)\n  }\n  render(){\n      return (\n      <div className=\"top-bar\">\n        <IconButton icon_src={\"res/pencil_and_paper.png\"} onClick={()=>{client.toggleEditMode()}}/>\n        <IconButton icon_src={\"res/notes.png\"} onClick={()=>{client.toggleMusicMenu()}}/>\n      </div>\n      )\n  }\n}\n\nclass Footer extends React.Component{\n  constructor(props){\n    super(props)\n  }\n  render(){\n    return (\n      <div className=\"footer\">\n        \n      </div>\n    )\n  }\n}\n\nclass App extends React.Component{\n  constructor(props){\n    super(props)\n  }\n  componentDidMount(){\n    client.initialize()\n  }\n  render(){\n    return (\n      <div className=\"App\">\n        <MusicMenu/>\n        <TopBar/>\n        <MainContent/>\n        <Footer/>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}